define("qtype_coderunner/fullscreen",["exports","core/notification","core/templates"],(function(_exports,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * JavaScript to handle full screen.
   *
   * @module qtype_coderunner/fullscreen
   * @copyright 2023 The Open University
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */function FullscreenEditor(questionId,fieldId,uiPlugin){const questionDiv=document.getElementById(questionId),editorSize={};let fullScreenButton,exitFullscreenButton;const editorWrapper=function(fieldId,uiPlugin){let editorElement;"ace"===getUIPluginType(uiPlugin)&&(editorElement=document.getElementById("".concat(fieldId,"_wrapper")));return editorElement}(fieldId,uiPlugin);function getUIPluginType(uiPlugin){return"ace"===uiPlugin||"ace_gapfiller"===uiPlugin?"ace":"default"}_templates.default.renderForPromise("qtype_coderunner/screenmode_button",{}).then((_ref=>{let{html:html}=_ref;const screenModeButton=_templates.default.appendNodeContents(editorWrapper,html,"")[0];fullScreenButton=screenModeButton.querySelector(".button-fullscreen"),exitFullscreenButton=screenModeButton.querySelector(".button-exit-fullscreen"),document.documentElement.mozRequestFullScreen&&(fullScreenButton.style.right="12px",exitFullscreenButton.style.right="12px"),fullScreenButton.classList.remove("d-none"),function(uiPlugin){exitFullscreenButton.addEventListener("click",(e=>{e.preventDefault(),document.exitFullscreen()})),fullScreenButton.addEventListener("click",(e=>{e.preventDefault(),function(uiPlugin){"ace"===getUIPluginType(uiPlugin)&&(editorSize.wrapper=editorWrapper.style.minHeight,editorSize.heightWraper=editorWrapper.style.height,editorSize.editor=questionDiv.querySelector(".ace_editor").style.height,editorSize.content=questionDiv.querySelector(".ace_content").style.height)}(uiPlugin),fullScreenButton.classList.add("d-none"),editorWrapper.addEventListener("fullscreenchange",(()=>{null===document.fullscreenElement?(!function(uiPlugin){"ace"===getUIPluginType(uiPlugin)&&(editorWrapper.style.minHeight=editorSize.wrapper,editorWrapper.style.height=editorSize.heightWraper,questionDiv.querySelector(".ace_editor").style.height=editorSize.editor,questionDiv.querySelector(".ace_content").style.height=editorSize.content)}(uiPlugin),exitFullscreenButton.classList.add("d-none"),fullScreenButton.classList.remove("d-none")):exitFullscreenButton.classList.remove("d-none")})),editorWrapper.requestFullscreen().catch(_notification.default.exception)}))}(uiPlugin)}))}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);_exports.init=(questionId,fieldId,uiPlugin)=>{new FullscreenEditor(questionId,fieldId,uiPlugin)}}));

//# sourceMappingURL=fullscreen.min.js.map